<p id="notice"><%= notice %></p>

<h1>Posts</h1>

<%= form_with model: Post.new do |f| %>
<%= f.label :Troll %>
<%= f.text_field :titulo %>
<%= f.submit :enviar %>
<% end %>

<form action="<%= posts_path %>">
  <input name="q">
</form>

<div id="posts">
  <table>
    <tbody>
      <%= render @posts %>
    </tbody>
  </table>
</div>

<script>
  $("[name=q]").keyup(function(event) {
    $.ajax({
      url: '<%= posts_path %>',
      type: 'GET',
      dataType: 'script',
      data: {q: $(this).val()}
    })
    .done(function() {
      console.log("success");
    })
    .fail(function() {
      console.log("error");
    })
    .always(function() {
      console.log("complete");
    });

  });
</script>
